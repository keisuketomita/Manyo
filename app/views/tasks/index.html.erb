<h1>タスク一覧</h1>
<%= form_with url: tasks_path, method: :get, local: true do |f| %>
  <%= f.text_field :name, placeholder: "タスク名で検索", id: "search_task_name" %>
  <%= select_tag :status, options_for_select([['未選択', ''],['未着手', '未着手'], ['着手中', '着手中'], ['完了', '完了']]) %>
  <%= f.submit 'Search' %>
  <%= link_to 'Clear', tasks_path %>
<% end %>
<table>
  <thead>
    <tr>
      <th>タスク名</th>
      <th>タスク詳細</th>
      <th><%= link_to "終了期限", tasks_path(sort_expired: "true") %></th>
      <th>ステータス</th>
      <th>作成日時</th>
      <th>更新日時</th>
    </tr>
  </thead>
  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td><%= task.name %></td>
        <td><%= task.detail %></td>
        <td><%= task.dead_line %></td>
        <td><%= task.status %></td>
        <td><%= task.created_at.strftime("%Y-%m-%d %H:%M") %></td>
        <td><%= task.updated_at.strftime("%Y-%m-%d %H:%M") %></td>
        <td><%= link_to '詳細', task_path(task.id)  %></td>
        <td><%= link_to '編集', edit_task_path(task.id)  %></td>
        <td><%= link_to '削除', task_path(task.id), method: :delete,
                data: { confirm: '本当に削除していいですか？' }  %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= link_to 'タスクを登録する', new_task_path %>
